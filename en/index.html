---
# This file is for the English homepage.
# The language 'en' is set via _config.yml
---
{%- assign t = site.data.en -%}
<div class="container">

  <!-- About Me Section -->
  <section id="about" class="about-section">
    <div class="profile-sidebar">
      <img src="{{ '/assets/img/bio.png' | relative_url }}" alt="{{ t.profile.name }}" class="profile-pic">
      <h2>{{ t.profile.name }}</h2>
      <p>{{ t.profile.title }}</p>
      <ul class="contact-info">
        <li><i class="fas fa-envelope"></i> <span id="email-placeholder">[Loading...]</span></li>
        <li><i class="fas fa-file-pdf"></i> <a id="cv-link-sidebar" class="cv-dynamic-link" href="#" target="_blank">{{ t.profile.cv_button }}</a></li>
        <li><i class="fas fa-map-marker-alt"></i> {{ t.profile.location }}</li>
        <li><i class="fab fa-weixin"></i> {{ t.profile.wechat_id }}</li>
      </ul>
    </div>
    <div class="about-content">
  <h1 class="section-title-left">{{ t.about.title }}</h1>
  <!-- 新增一个容器用于两栏布局 -->
  <div class="about-grid">
    <div class="prose">
      {%- assign cv_link_html = '<a href="#" class="cv-dynamic-link">' | append: t.about.cv_link_text | append: '</a>' -%}
      {{ t.about.intro | markdownify | replace: '[CV_LINK]', cv_link_html }}
    </div>
    <!-- 将图片移到文字的同级，并赋予新class -->
    <div class="about-photo-container">
      <img src="{{ '/assets/img/photo.png' | relative_url }}" alt="{{ t.profile.name }} formal" class="about-image">
    </div>
  </div>
</div>
  </section>

<!-- ==================== Education Section ==================== -->
<section id="education" class="content-section">
  <h1 class="section-title">{{ t.education.title }}</h1>
  <div class="education-list">
    {% for item in t.education.items %}
      <div class="education-item">
        <div class="education-duration">{{ item.duration }}</div>
        <div class="education-details">
          <p class="education-degree">{{ item.degree }}</p>
          <p class="education-institution">{{ item.institution }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</section>

<!-- ==================== Research Interests Section ==================== -->
<section id="research-interests" class="content-section">
    <h1 class="section-title">{{ t.research_interests.title }}</h1>
    <div class="interests-container">
        <ul class="interest-list">
            {% for interest in t.research_interests.keywords %}
                <li>{{ interest }}</li>
            {% endfor %}
        </ul>
        <p class="interest-description">{{ t.research_interests.description }}</p>
    </div>
</section>
  
  <!-- Research Highlights Section -->
  <section id="research-highlights" class="content-section"> <!-- 改为 content-section 以统一间距 -->
  <h1 class="section-title">{{ t.research_highlights.title }}</h1>
  <div class="interests-container"> <!-- 复用 interests-container 来居中 -->
    <p class="interest-description" style="text-align: left; margin-bottom: 30px;">
      {{ t.research_highlights.description }}
    </p>
    <a href="{{ '/research.html' | relative_url }}" class="button-primary">{{ t.research_highlights.button }}</a>
  </div>
</section>

  <!-- Resources Section -->
  <section id="resources" class="resources-section">
    <h1 class="section-title">{{ t.resources.title }}</h1>
    <div class="resources-grid">
      {% for item in t.resources.items %}
      <a href="{{ item.url }}" class="resource-card" target="_blank" rel="noopener noreferrer">
        <div class="card-icon"><i class="{{ item.icon }}"></i></div>
        <h3 class="card-title">{{ item.title }}</h3>
        <p class="card-description">{{ item.description }}</p>
        <div class="card-footer">View Project →</div>
      </a>
      {% endfor %}
    </div>
  </section>

  <!-- 动态加载简历脚本 -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    // 1. 读取 profile.json
    fetch('/profile.json?t=' + new Date().getTime()) // 加个时间戳防止json本身被缓存
        .then(response => response.json())
        .then(data => {
            // 获取所有带有 'cv-dynamic-link' 类的标签 (包括侧边栏和正文里的)
            const cvLinks = document.querySelectorAll('.cv-dynamic-link');
            
            // 2. 拼接带版本号的链接 (防PDF缓存)
            const finalLink = data.cv_en + "?v=" + data.version;

            // 3. 批量替换
            cvLinks.forEach(link => {
                link.href = finalLink;
            });
            
            console.log("简历已更新为英文版:", finalLink);
        })
        .catch(error => console.error('简历加载失败:', error));
});
</script>
</div>
